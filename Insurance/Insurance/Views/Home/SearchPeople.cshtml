
@{
    ViewData["Title"] = "SearchPeople";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model Insurance.Models.SearchPeopleModel
@using System.Data
<br />
<div>
    @using (Html.BeginForm(actionName: "Search", controllerName: "Home", method: FormMethod.Get))
    {
        <div class="input-group">
            <div class="input-group-prepend">
                <span class="input-group-text">姓名</span>
            </div>
            <input name="em_name" asp-for="People.Name" style="margin-right:2%" type="text" class="form-control">
            <div class="input-group-prepend">
                <span class="input-group-text">身份证</span>
            </div>
            <input name="em_id" asp-for="People.ID" style="margin-right:2%" type="text" class="form-control">
            <input class="btn btn-info" type="submit" value="查询人员" />
        </div>
        <br />

    }
</div>
<div>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">姓名</th>
                <th scope="col">身份证</th>
                <th scope="col">工种</th>
                <th scope="col">职业类别</th>
                <th scope="col">操作</th>

            </tr>
        </thead>
        <tbody>
            @{
                if (Model != null && Model.Result != null)
                {
                    foreach (DataRow row in Model.Result.Rows)
                    {
                        <tr>
                            <td class="td_middle">@row["name"]</td>
                            <td class="td_middle">@row["id"]</td>
                            <td class="td_middle">@row["job"]</td>
                            <td class="td_middle">@row["type"]</td>
                            @{
                                if (row["name"].ToString() != "未找到符合条件的人员")
                                {
                                    <td class="td_middle"><button class="btn btn-primary" data-toggle="modal" data-whatever="@row["name"]" data-target="#personalInfo" type="button" onclick="personDetail('@row["History"]')">详细</button></td>
                                }
                            }
                        </tr>
                    }
                }

            }
        </tbody>
    </table>
</div>
<div class="modal fade bd-example-modal-xl" id="personalInfo" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">New message</h5>
            </div>
            <div class="modal-body">
                <table class="table table-active">
                    <thead>
                        <tr>
                            <th scope="col">操作</th>
                            <th scope="col">操作时间</th>
                            <th scope="col">保障开始时间</th>
                            <th scope="col">保障结束时间</th>
                            <th scope="col">所属公司</th>
                            <th scope="col">操作账号</th>
                        </tr>
                    </thead>
                    <tbody id="info">

                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    $("a.active").removeClass('active');
    $("#page_4").addClass('active');
    $('#personalInfo').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget) // Button that triggered the modal
        var recipient = button.data('whatever') // Extract info from data-* attributes
        // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
        // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
        var modal = $(this)
        modal.find('.modal-title').text(recipient + ' 明细')
        //modal.find('.modal-body input').val(recipient)
    });
</script>
